{{ define "location_form.html" }}
<form hx-post="/locations/save" 
      hx-target="#locations-table"
      hx-on:after-request="if (event.detail.successful) { document.getElementById('modal').style.display = 'none'; document.getElementById('modal-body').innerHTML = ''; }">
    
    <input type="hidden" name="id" value="{{.Location.ID}}">

    <div class="form-group">
        <label class="form-label">Название ресторана *</label>
        <input type="text" name="name" value="{{.Location.Name}}" class="form-input" required>
    </div>

    <div class="form-group">
        <label class="form-label">Описание</label>
        <textarea name="description" class="form-input" rows="3">{{.Location.Description}}</textarea>
    </div>

    <div class="form-group">
        <label class="form-label">Адрес *</label>
        <textarea name="address" class="form-input" rows="2" required>{{.Location.Address}}</textarea>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Телефон *</label>
            <input type="tel" name="phone" value="{{.Location.Phone}}" class="form-input" required>
        </div>

        <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" name="email" value="{{.Location.Email}}" class="form-input">
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Веб-сайт</label>
            <input type="url" name="website" value="{{.Location.Website}}" class="form-input">
        </div>

        <div class="form-group">
            <label class="form-label">Instagram</label>
            <input type="text" name="instagram" value="{{.Location.Instagram}}" class="form-input">
        </div>
    </div>

    <div class="form-group">
        <label class="form-label">Telegram</label>
        <input type="text" name="telegram" value="{{.Location.Telegram}}" class="form-input">
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
        <div class="form-group">
            <label class="form-label">Рейтинг</label>
            <input type="number" step="0.1" min="0" max="5" name="rating" 
                   value="{{.Location.Rating}}" class="form-input">
        </div>

        <div class="form-group">
            <label class="form-label">Количество отзывов</label>
            <input type="number" min="0" name="review_count" 
                   value="{{.Location.ReviewCount}}" class="form-input">
        </div>

        <div class="form-group">
            <label class="form-label">Ценовой диапазон</label>
            <select name="price_range" class="form-input" required>
                {{range .PriceRanges}}
                <option value="{{.value}}" {{if eq $.Location.PriceRange .value}}selected{{end}}>
                    {{.label}}
                </option>
                {{end}}
            </select>
        </div>
    </div>

    <div class="form-group">
        <label class="form-label">Статус</label>
        <select name="status" class="form-input" required>
            {{range .Statuses}}
            <option value="{{.}}" {{if eq $.Location.Status .}}selected{{end}}>
                {{if eq . "pending"}}На рассмотрении{{end}}
                {{if eq . "verified"}}Подтверждён{{end}}
                {{if eq . "suspended"}}Приостановлен{{end}}
                {{if eq . "rejected"}}Отклонён{{end}}
            </option>
            {{end}}
        </select>
    </div>

    <div class="form-group">
        <label class="form-label">Особенности</label>
        <div class="features-checkbox">
            <label>
                <input type="checkbox" name="feature_wifi" 
                       {{if .Location.Features.wifi}}checked{{end}}>
                Wi-Fi
            </label>
            <label>
                <input type="checkbox" name="feature_parking" 
                       {{if .Location.Features.parking}}checked{{end}}>
                Парковка
            </label>
            <label>
                <input type="checkbox" name="feature_terrace" 
                       {{if .Location.Features.terrace}}checked{{end}}>
                Терраса
            </label>
            <label>
                <input type="checkbox" name="feature_delivery" 
                       {{if .Location.Features.delivery}}checked{{end}}>
                Доставка
            </label>
            <label>
                <input type="checkbox" name="feature_takeaway" 
                       {{if .Location.Features.takeaway}}checked{{end}}>
                На вынос
            </label>
        </div>
    </div>

    <div style="display: flex; gap: 1rem; justify-content: flex-end; margin-top: 2rem;">
        <button type="button" class="btn" 
                onclick="document.getElementById('modal').style.display = 'none'; document.getElementById('modal-body').innerHTML = '';">
            Отмена
        </button>
        <button type="submit" class="btn btn-primary">
            {{if .Edit}}Обновить{{else}}Создать{{end}}
        </button>
    </div>
</form>
{{ end }}